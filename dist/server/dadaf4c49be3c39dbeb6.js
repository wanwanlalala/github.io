exports.ids=[3],exports.modules={106:function(t,e,r){"use strict";r.r(e);var o=r(81),l=r.n(o);for(var d in o)"default"!==d&&function(t){r.d(e,t,function(){return o[t]})}(d);e.default=l.a},107:function(t,e,r){(t.exports=r(2)(!1)).push([t.i,'@charset "UTF-8";.page-detail .m-crumbs{margin:20px 0}.page-detail .m-sum-card{display:flex;background:#fff;box-shadow:0 5px 14px 0 rgba(0,0,0,.1);border-radius:10px;padding:20px}.page-detail .m-sum-card dt{flex:1;padding-bottom:5px}.page-detail .m-sum-card dt h1{font-size:26px;font-weight:500;color:#222}.page-detail .m-sum-card dt .el-rate{display:inline-block}.page-detail .m-sum-card dt .el-rate .el-rate__icon{font-size:12px}.page-detail .m-sum-card dt>span{font-size:12px;margin-right:10px}.page-detail .m-sum-card dt>ul{border-top:1px solid #e5e5e5;list-style:none;padding-top:5px;margin-top:10px}.page-detail .m-sum-card dt>ul li{font-size:14px;color:#666;padding:7px 0}.page-detail .m-sum-card dd{width:383px}.page-detail .m-detail-list{margin-top:34px}.page-detail .m-detail-list h3{margin:8px 0}.page-detail .m-detail-list ul{list-style:none;background-color:#fff;padding:20px 20px 0;margin-bottom:10px;border-radius:4px;border:1px solid #e5e5e5}.page-detail .m-detail-item .section{display:flex;padding:20px 0;border-bottom:1px solid #ddd;align-items:center}.page-detail .m-detail-item .section dd:first-child{padding-right:20px}.page-detail .m-detail-item .section dd:first-child img{width:100px;height:100px;border-radius:4px}.page-detail .m-detail-item .section dd:nth-child(2){flex:1}.page-detail .m-detail-item .section dd>h4{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:480px;font-size:16px;color:#222;font-weight:500;height:22px;line-height:22px;margin-bottom:4px;cursor:pointer}.page-detail .m-detail-item .section dd>p{font-size:12px;color:#666;height:17px;line-height:17px;margin-bottom:22px}.page-detail .m-detail-item .section dd>p .price{font-size:30px;color:#f60;margin-right:10px}.page-detail .m-detail-item .section dd>p .price:before{content:"￥";font-size:14px}.page-detail .m-detail-item li:last-child .section{border-bottom:none}.page-detail .m-title{font-size:20px;line-height:26px;margin-bottom:8px;margin-top:40px}.page-detail .deal-need-login{padding:30px 0;margin-bottom:40px;text-align:center;background-color:#fff;border:1px solid #e5e5e5}.page-detail .deal-need-login>img{display:inline-block;width:160px;height:120px;border-radius:4px}.page-detail .deal-need-login>span{display:block;margin:10px 0 14px;color:#666;font-size:16px;line-height:26px}.page-detail .deal-need-login>button{background-color:#13d1be;border-color:#13d1be}.page-detail .deal-need-login>button a{color:#fff}',""])},148:function(t,e,r){"use strict";r.r(e);var o={props:{keyword:{type:String,default:""},type:{type:String,default:""}}},l=r(1),d=Object(l.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"m-crumbs"},[r("el-breadcrumb",{attrs:{separator:">"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v(t._s(t.$store.state.geo.position.city.replace("市",""))+"美团")]),t._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v(t._s(t.$store.state.geo.position.city.replace("市",""))+t._s(t.type))]),t._v(" "),r("el-breadcrumb-item",[r("a",{attrs:{href:"/"}},[t._v(t._s(t.$store.state.geo.position.city.replace("市",""))+t._s(decodeURIComponent(t.keyword)))])])],1)],1)},[],!1,null,null,"1e84e431").exports,n={props:{meta:{type:Object,default:()=>({})}},data:()=>({sale:70+Math.floor(300*Math.random())}),computed:{rate:function(){return Number(this.meta.biz_ext.rating)||Math.floor(5*Math.random())}},methods:{openMap:function(t){}}},summary=Object(l.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"m-sum-card"},[t._ssrNode("<dt>","</dt>",[t._ssrNode("<h1>"+t._ssrEscape(t._s(t.meta.name))+"</h1> "),r("el-rate",{attrs:{disabled:""},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}}),t._ssrNode(" <span>"+t._ssrEscape(t._s(Number(t.meta.biz_ext.rating)||t.rate)+"分")+"</span> <span>"+t._ssrEscape("人均￥"+t._s(Number(t.meta.biz_ext.cost)))+"</span> <ul><li>"+t._ssrEscape("地址："+t._s(t.meta.address))+"</li> <li>"+t._ssrEscape("电话："+t._s(t.meta.tel))+"</li></ul>")],2),t._ssrNode(" "),t._ssrNode("<dd>","</dd>",[r("el-carousel",{attrs:{height:"214px","indicator-position":"none"}},t._l(t.meta.photos,function(t,e){return r("el-carousel-item",{key:e},[r("h3",[r("img",{attrs:{src:t.url,alt:"item.title",width:"100%",height:"100%"}})])])}),1)],1)],2)},[],!1,null,null,"0880c39d").exports,c={props:{meta:{type:Object,default:()=>({})}},methods:{createCart:async function(){let{status:t,data:{code:code,id:e}}=await this.$axios.post("/cart/create",{params:{id:Math.random().toString().slice(3,9),detail:{name:this.meta.name,price:this.meta.biz_ext.cost,imgs:this.meta.photos}}});200===t&&0===code?window.location.href=`/cart/?id=${e}`:console.log("error")}}},m={components:{item:Object(l.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.meta.photos.length?r("li",{staticClass:"m-detail-item"},[t._ssrNode('<dl class="section">',"</dl>",[t._ssrNode("<dd><img"+t._ssrAttr("src",t.meta.photos[0].url)+t._ssrAttr("alt",t.meta.photos[0].title)+"></dd> <dd><h4>"+t._ssrEscape(t._s(t.meta.name))+"</h4> <p>"+(t.meta.biz_ext&&t.meta.biz_ext.ticket_ordering?"<span>"+t._ssrEscape("剩余："+t._s(Number(t.meta.biz_ext.ticket_ordering)))+"</span>":"\x3c!----\x3e")+" "+(t.meta.deadline?"<span>"+t._ssrEscape("截止日期："+t._s(t.meta.deadline))+"</span>":"\x3c!----\x3e")+'</p> <p><span class="price">'+t._ssrEscape(t._s(Number(t.meta.biz_ext.cost)))+"</span> <sub>"+t._ssrEscape("门店价"+t._s(Number(t.meta.biz_ext.cost)))+"</sub></p></dd> "),t._ssrNode("<dd>","</dd>",[r("el-button",{attrs:{type:"warning",round:""},on:{click:t.createCart}},[t._v("立即抢购")])],1)],2)]):t._e()},[],!1,null,null,"70fe342c").exports},props:{list:{type:Array,default:()=>[]}}},h={components:{crumbs:d,summa:summary,list:Object(l.a)(m,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-detail-list"},[this._ssrNode("<ul>","</ul>",[this._ssrNode("<li>"+this._ssrEscape(this._s(this.list.filter(function(t){return t.photos.length}).length)+"款套餐")+"</li> "),this._l(this.list,function(t,r){return e("item",{key:r,attrs:{meta:t}})})],2)])},[],!1,null,null,"7b03ac37").exports},data:()=>({type:"",detail:"",product:{},list:[],login:""}),computed:{canOrder(){return this.list.filter(t=>t.photos.length).length}},async asyncData(t){let{keyword:e,type:r}=t.query,{status:o,data:{product:l,more:d,login:n}}=await t.$axios.get("/search/products",{params:{keyword:e,type:r,city:t.store.state.geo.position.city}});return 200===o?{keyword:e,type:r,product:l,list:d,login:n}:{keyword:e,type:r,product:{},list:[],login:!1}}};var _=Object(l.a)(h,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-detail"},[r("el-row",[r("el-col",{attrs:{span:24}},[r("crumbs",{attrs:{type:t.type,keyword:t.keyword}})],1)],1),t._ssrNode(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("summa",{attrs:{meta:t.product}})],1)],1),t._ssrNode(" "),r("el-row",{staticClass:"m-title"},[r("el-col",{attrs:{span:24}},[r("h3",[t._v("商家团购及优惠")])])],1),t._ssrNode(" "),t.canOrder||!t.login?r("el-row",[r("el-col",{attrs:{span:24}},[t.login?r("list",{attrs:{list:t.list}}):r("div",{staticClass:"deal-need-login"},[r("img",{attrs:{src:"//p0.meituan.net/codeman/56a7d5abcb5ce3d90fc91195e5b5856911194.png",alt:"登录查看"}}),t._v(" "),r("span",[t._v("请登录后查看详细团购优惠")]),t._v(" "),r("el-button",{attrs:{type:"primary",round:""}},[r("a",{attrs:{href:"/login"}},[t._v("立即登录")])])],1)],1)],1):t._e()],2)},[],!1,function(t){var e=r(106);e.__inject__&&e.__inject__(t)},null,"420093c6");e.default=_.exports},81:function(t,e,r){var content=r(107);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var o=r(3).default;t.exports.__inject__=function(t){o("318e1a1e",content,!0,t)}}};
//# sourceMappingURL=dadaf4c49be3c39dbeb6.js.map